<!DOCTYPE html>
<html>

<head>
    <meta charset="utf-8">
    <title>Git Wizard Tool</title>
    <link rel="stylesheet" type="text/css" href="git-wizard.css">

</head>

<body>

    <div class="container">
        <h1>Git Wizard Tool</h1>

        <div class="steps">

        </div>
        <div class="buttons">
            <button id="previousStep" data-load-previous disabled>&lt;&lt; Vorige stap</button>
            <button id="nextStep" data-load-next>Volgende stap &gt;&gt;</button>
        </div>
    </div>

    <script type="text/javascript">
        document.getElementById('previousStep').addEventListener("click", PageDown);
        document.getElementById('previousStep').addEventListener("click", getContent);
        document.getElementById('nextStep').addEventListener("click", PageUp);
        document.getElementById('nextStep').addEventListener("click", getContent);


        window.addEventListener("load", getContent);
        var xhr = new XMLHttpRequest();

        xhr.addEventListener("load", ajaxLoad);
        xhr.addEventListener("error", ajaxError);

        var currentpage = 0;

        function PageUp() {
            currentpage++;
            buttonCheck();
        }

        function PageDown() {
            currentpage--;
            buttonCheck();
        }

        function buttonCheck() {
            var prev = document.querySelector('#previousStep');
            var next = document.querySelector('#nextStep');
            if (currentpage == 0) {
                prev.disabled = true;
            } else if (currentpage == 4) {
                next.disabled = true;
            } else {
                prev.disabled = false;
                next.disabled = false;
            }
        }

        function getContent() {
            xhr.open("GET", 'views/Stap' + currentpage + '.html');
            xhr.send();
        }


        function ajaxLoad(event) {
            if (this.status === 200) {
                document.querySelector('.steps').innerHTML = this.responseText;
                pageInput();
            } else {
                console.log("unsuccessful request");
            }
        }

        function ajaxError(event) {
            console.log('error');
        }

        function pageInput() {
            switch (currentpage) {
                case 0:
                    console.log('0');
                    break;
                case 1:
                    document.querySelector('#folder').addEventListener("keyup", folderSearch);

                    function folderSearch() {
                        var search = document.getElementById('folder').value;
                        if (search.indexOf(' ') > 0) {
                            search = '"' + search + '"';
                        }
                        document.querySelector('#zoekFolderCommando').innerHTML = 'cd ' + search;
                    }
                    document.querySelector('#cloneUrl').addEventListener("keyup", gitSearch);


                    function gitSearch() {
                        var search = document.getElementById('cloneUrl').value;
                        if (search.indexOf(' ') > 0) {
                            search = '"' + search + '"';
                        }
                        document.querySelector('#cloneCommand').innerHTML = 'git clone ' + search;
                    }

                    document.querySelector('#zoekFolderCommando').addEventListener("click", copyStringToClipboard);
                    document.querySelector('#cloneCommand').addEventListener("click", copyStringToClipboard);

                    break;
                case 2:
                    document.querySelector('#commitComment').addEventListener("keyup", addComment);

                    function addComment() {
                        var search = document.getElementById('commitComment').value;
                        document.querySelector('#commitCommand').innerHTML = 'git commit -a -m "' + search + '"';
                    }

                    document.querySelector('#getStatus').addEventListener("click", copyStringToClipboard);
                    document.querySelector('#getAdd').addEventListener("click", copyStringToClipboard);
                    document.querySelector('#commitCommand').addEventListener("click", copyStringToClipboard);

                    break;
                case 3:
                    document.querySelector('#getPull').addEventListener("click", copyStringToClipboard);

                    break;
                case 4:
                    document.querySelector('#getPush').addEventListener("click", copyStringToClipboard);

                    break;
                default:

            }
        }

        function copyStringToClipboard() {
            var copytje = this.innerHTML;

            function handler(event) {
                event.clipboardData.setData('text/plain', copytje);
                event.preventDefault();
                document.removeEventListener('copy', handler, true);
            }

            document.addEventListener('copy', handler, true);
            document.execCommand('copy');
        }
        // console.log(search)
    </script>



</body>

</html>
